<!-- Solve launch modal (HTMX partial) -->
<div id="solve-modal" class="fixed inset-0 z-50 overflow-y-auto">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"
         onclick="document.getElementById('solve-modal').remove()"></div>

    <!-- Modal panel -->
    <div class="flex min-h-full items-center justify-center p-4">
        <div class="relative bg-white rounded-lg shadow-xl max-w-md w-full p-6">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Launch Solver</h3>

            {% if errors %}
            <div class="mb-4 rounded-md bg-red-50 p-4">
                <h4 class="text-sm font-medium text-red-800">Cannot launch solver</h4>
                <ul class="mt-2 text-sm text-red-700 list-disc list-inside">
                    {% for error in errors %}
                    <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
            {% endif %}

            <dl class="space-y-3 mb-6">
                <div class="flex justify-between">
                    <dt class="text-sm text-gray-500">Date Range</dt>
                    <dd class="text-sm font-medium text-gray-900">{{ req.start_date|date:"N j, Y" }} - {{ req.end_date|date:"N j, Y" }}</dd>
                </div>
                <div class="flex justify-between">
                    <dt class="text-sm text-gray-500">Workers</dt>
                    <dd class="text-sm font-medium text-gray-900">
                        {% if worker_count %}{{ worker_count }}{% else %}All active{% endif %}
                    </dd>
                </div>
                <div class="flex justify-between">
                    <dt class="text-sm text-gray-500">Shift Types</dt>
                    <dd class="text-sm font-medium text-gray-900">
                        {% if shift_count %}{{ shift_count }}{% else %}All active{% endif %}
                    </dd>
                </div>
            </dl>

            <div class="flex space-x-3 justify-end">
                <button type="button"
                        onclick="document.getElementById('solve-modal').remove()"
                        class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                    Cancel
                </button>
                {% if not errors %}
                <form method="post" action="{% url 'solve-launch' req.pk %}">
                    {% csrf_token %}
                    <button type="submit"
                            class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                        Solve Schedule
                    </button>
                </form>
                {% endif %}
            </div>
        </div>
    </div>
</div>
